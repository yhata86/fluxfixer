<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve time series in its original units — retrieve_ts • fluxfixer</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve time series in its original units — retrieve_ts"><meta name="description" content="`retrieve_ts()` converts a standardized Z-score time series
 into a time series in its original units using specific average and
 standard deviation time series."><meta property="og:description" content="`retrieve_ts()` converts a standardized Z-score time series
 into a time series in its original units using specific average and
 standard deviation time series."><meta property="og:image" content="https://yhata86.github.io/fluxfixer/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fluxfixer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fluxfixer.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/yhata86/fluxfixer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve time series in its original units</h1>
      <small class="dont-index">Source: <a href="https://github.com/yhata86/fluxfixer/blob/main/R/remove_statistical_outlier.R" class="external-link"><code>R/remove_statistical_outlier.R</code></a></small>
      <div class="d-none name"><code>retrieve_ts.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>`retrieve_ts()` converts a standardized Z-score time series
 into a time series in its original units using specific average and
 standard deviation time series.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">retrieve_ts</span><span class="op">(</span></span>
<span>  <span class="va">vctr_target_z</span>,</span>
<span>  vctr_target_avg <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  vctr_target_sd <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  detrend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  correct_damping <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  avg_ref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sd_ref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label_err <span class="op">=</span> <span class="op">-</span><span class="fl">9999</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-vctr-target-z">vctr_target_z<a class="anchor" aria-label="anchor" href="#arg-vctr-target-z"></a></dt>
<dd><p>A vector of Z-score time series to be converted.
Missing values must be gap-filled previously.</p></dd>


<dt id="arg-vctr-target-avg">vctr_target_avg<a class="anchor" aria-label="anchor" href="#arg-vctr-target-avg"></a></dt>
<dd><p>A vector of average time series. Missing values are
acceptable but automatically gap-filled by interpolation during the
retrieving process. The length of the vector must match that of
`vctr_target_z`. The unit of the time series must match that of time series
to be output. Default is `NA`.</p></dd>


<dt id="arg-vctr-target-sd">vctr_target_sd<a class="anchor" aria-label="anchor" href="#arg-vctr-target-sd"></a></dt>
<dd><p>A vector of standard deviation time series. Missing
values are acceptable but automatically gap-filled by interpolation during
the retrieving process. The length of the vector must match that of
`vctr_target_z`. The unit of the time series must match that of time series
to be output. Default is `NA`.</p></dd>


<dt id="arg-detrend">detrend<a class="anchor" aria-label="anchor" href="#arg-detrend"></a></dt>
<dd><p>A boolean. If `TRUE`, detrending is applied and the reference
average specified by `avg_ref` is used to convert Z-score time series into
the time series with the reference average in its original units; else, the
detrending is not applied, and the average time series specified by
`vctr_target_avg` is used in the conversion. Default is `FALSE`.</p></dd>


<dt id="arg-correct-damping">correct_damping<a class="anchor" aria-label="anchor" href="#arg-correct-damping"></a></dt>
<dd><p>A boolean. If `TRUE`, the signal damping correction
is applied and the reference standard deviation specified by `sd_ref` is
used to convert Z-score time series into the time series in its original
units with the reference standard deviation; else, the correction is not
applied, and the standard deviation time series specified by
`vctr_target_sd` is used in the conversion. Default is `FALSE`.</p></dd>


<dt id="arg-avg-ref">avg_ref<a class="anchor" aria-label="anchor" href="#arg-avg-ref"></a></dt>
<dd><p>Only valid if `detrend` is `TRUE`. A numeric value
representing the reference average. A vector of reference average time
series is also acceptable, but the length of the vector must match that of
`vctr_target_z`, and the unit of the time series must match that of time
series to be output. Default is `NULL`.</p></dd>


<dt id="arg-sd-ref">sd_ref<a class="anchor" aria-label="anchor" href="#arg-sd-ref"></a></dt>
<dd><p>Only valid if `correct_damping` is `TRUE`. A positive numeric
value representing the reference standard deviation. A vector of reference
standard deviation time series is also acceptable, but the length of the
vector must match that of `vctr_target_z`, and the unit of the time series
must match that of time series to be output. Default is `NULL`.</p></dd>


<dt id="arg-label-err">label_err<a class="anchor" aria-label="anchor" href="#arg-label-err"></a></dt>
<dd><p>A numeric value representing a missing value in the input
vector(s). Default is -9999.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of the retrieved time series. The length of the vector is the same
as `vctr_target_z`.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Retrieving a time series with its original units is conducted by multiplying
a Z-score by the standard deviation, followed by adding the average. If the
average and standard deviation time series are the same as those in
converting the original time series into the Z-score time series, the
original values with the original average and standard deviation are
retrieved. If reference values of the average and/or standard deviation are
used, the output time series are detrended and/or applied to signal damping
correction.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>calc_ref_stats</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Yoshiaki Hata</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Create data</span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">target_avg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">target</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">target_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">target</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">target_z</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">target</span> <span class="op">-</span> <span class="va">target_avg</span><span class="op">)</span> <span class="op">/</span> <span class="va">target_sd</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Retrieve time series in its original units</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">retrieve_ts</span><span class="op">(</span>vctr_target_z <span class="op">=</span> <span class="va">target_z</span>, vctr_target_avg <span class="op">=</span> <span class="va">target_avg</span>,</span></span>
<span class="r-in"><span>              vctr_target_sd <span class="op">=</span> <span class="va">target_sd</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Time series retrieval started</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> --- Signal damping correction was not applied</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> --- Detrending was not applied</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Time series retrieval finished</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yoshiaki Hata.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

